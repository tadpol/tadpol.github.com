---
layout: default
created: "2006-02-01 16:10:00 -0600"
title: "Mapping Includes"
date: "2006-02-01 16:10:00 -0600"
---


<p>I was off building up a diagram in OmniGraffle that mapped the include
dependency of a project I&#8217;m working on.  And it didn&#8217;t take to long for
me to wonder why I was doing this by hand.  OmniGraffle already has a
nice importer for when you are working on Obj-C files, but this project
is plain C.  So I pulled something together quick, its not the prettiest
bits of ruby you&#8217;ll see.  But it will take a bunch of <code>.c</code> or <code>.h</code>
files, and dump out a <code>.dot</code>, which you can then open with OmniGraffle.</p>

<p>By default, it ignores system includes (<small>Files included with
&lt;></small>), ignores file extensions and grabs all of the <code>.[ch]</code> files
in the current directory.  I have it ignore extensions because what I
want to see is the high level conceptual &#8220;this block of code needs that
block of code&#8221; instead of exactly which file has which file.  You can
also specify which included files it should ignore or not ignore.  Files
that were specified get circles, others get boxes, giving a nice visual
cue on where that file is.</p>

<p>Calling <code>mapincludes.rb -I event -s sfx</code> on my current project creates a
dot that OmniGraffle turns into: 
<img src="/projects/images/takamap.png" border="0" height="356"
width="476" alt="takamap.png" align="" /></p>

<p>Which you can then do some cleanup work on. (<small>Cuz as you can see,
it needs it.</small>)</p>

<p><a href="archives/mapincludes.zip">Download</a></p>

